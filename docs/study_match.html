<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Documentation for MATCH - 1&nbsp; MATCH (Fronk Dissertation)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">MATCH (Fronk Dissertation)</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Documentation for MATCH</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/jjcurtin/docs_match" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Welcome</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Studies</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./study_match.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">MATCH (Fronk Dissertation)</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#specific-aims" id="toc-specific-aims" class="nav-link active" data-scroll-target="#specific-aims"><span class="toc-section-number">1.1</span>  Specific Aims</a></li>
  <li><a href="#approach" id="toc-approach" class="nav-link" data-scroll-target="#approach"><span class="toc-section-number">1.2</span>  Approach</a>
  <ul class="collapse">
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data"><span class="toc-section-number">1.2.1</span>  Data</a></li>
  <li><a href="#model-fitting" id="toc-model-fitting" class="nav-link" data-scroll-target="#model-fitting"><span class="toc-section-number">1.2.2</span>  Model Fitting</a></li>
  </ul></li>
  <li><a href="#analysis-plan" id="toc-analysis-plan" class="nav-link" data-scroll-target="#analysis-plan"><span class="toc-section-number">1.3</span>  Analysis Plan</a>
  <ul class="collapse">
  <li><a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview"><span class="toc-section-number">1.3.1</span>  Overview</a></li>
  <li><a href="#specific-steps" id="toc-specific-steps" class="nav-link" data-scroll-target="#specific-steps"><span class="toc-section-number">1.3.2</span>  Specific Steps</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/jjcurtin/docs_match/edit/main/study_match.qmd" class="toc-action">Edit this page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">MATCH (Fronk Dissertation)</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><strong>Project Members</strong>: Gaylen Fronk, John Curtin, Megan Piper, Tim Baker</p>
<p><strong>Dissertation/Mentoring Committee Members</strong>: John Curtin, Megan Piper, James Li, Craig Berridge, Kate Walsh, Linnea Burk</p>
<section id="specific-aims" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="specific-aims"><span class="header-section-number">1.1</span> Specific Aims</h2>
<p>Precision mental health is the application of the precision medicine paradigm to mental health conditions. Whereas traditional treatment selection relies on population-level treatment effectiveness, precision mental health guides treatment selection using individual difference characteristics likely to predict treatment success for each patient. Several factors have hindered research progress towards treatment selection via precision mental health models. First, traditional analytic techniques cannot account for the complex (high-dimensional) relationships between individual differences and treatment success necessary for robust, precise, person-level prediction. Thus, extant research has been unable to capture the real-world complexities of treatment response and recovery. Second, precision mental health research has built and evaluated models in the same samples. Consequently, these models become overfit to the development sample and do not generalize well to new data. This approach prevents precision mental health models from accurately guiding treatment selection in new patients.</p>
<p>Contemporary machine learning approaches are well-suited to overcome these limitations of previous precision mental health research. Machine learning models can accommodate high-dimensional arrays of features, and generalize robustly to new samples of patients. These approaches allow us to build models that are simultaneously complex enough to capture real-world relationships and generalizable enough to permit precise, person-level prediction.</p>
<p>The proposed project represents a tangible application of the precision mental health paradigm using modern machine learning approaches. This project would produce a decision-making tool to select among cigarette smoking cessation treatments for individuals looking to quit smoking. Cigarette smoking remains a critical and costly public health crisis. Existing treatments are only modestly effective at best. Additionally, treatments are similarly effective at the population level, meaning that even population-level effectiveness cannot guide treatment selection for individuals quitting smoking. Thus, deciding among first-line (i.e., FDA-approved) smoking cessation medications is a specific, objective decision that many smokers must make. Successful application of the precision mental health paradigm to cigarette smoking cessation would have immediate clinical benefit. It would also serve as a template for how to improve treatment outcomes across substance use disorders.</p>
<p>Specifically, this project pursues the following aims:</p>
<p><strong>AIM 1: Build a machine learning model to guide treatment selection for cigarette smoking cessation.</strong> We will build a machine learning model to predict treatment success (i.e., 4-week point-prevalence abstinence from smoking) for people who smoke who received one of three cigarette smoking cessation treatments. This model will use clinical features (predictors) from a richly characterized sample of people who smoke from a previously completed randomized controlled trial. The model will produce probabilities of treatment success for each treatment such that it can guide selection of the best treatment for any specific individual.</p>
<p><strong>AIM 2: Evaluate the clinical benefit of using a treatment selection machine learning model.</strong> Using the best model identified in <strong>AIM 1</strong>, we will identify the treatment for each person that gives them the highest likelihood of abstinence at 6 months by comparing predicted probabilities of abstinence for each participant for each treatment. We will evaluate the clinical benefit of this approach in two complementary ways. First, we will compare the aggregate predicted (i.e., model-based) treatment success to observed treatment success from the original trial. Second, we will compare the observed trial abstinence of individuals who (randomly) received their best treatment with the observed trial abstinence of individuals who did not.</p>
</section>
<section id="approach" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="approach"><span class="header-section-number">1.2</span> Approach</h2>
<section id="data" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="data"><span class="header-section-number">1.2.1</span> Data</h3>
<p>The data come from a completed RCT comparing the effectiveness of varenicline, combination nicotine replacement therapy (C-NRT), and nicotine patch. 1086 daily cigarette smokers were enrolled beginning several weeks before a target quit date and for at least 6 months following quitting smoking. Participants were randomly assigned to 12 weeks of medication treatment.</p>
<p>The sample was comprehensively assessed for individual differences at baseline including tobacco-related, psychological, physical health, demographic, and social/environmental variables. There are 414 individual difference characteristics. Treatment will also be included as a feature in all models and allowed to interact with other features.</p>
<p>The model outcome is treatment success (abstinent vs.&nbsp;smoking) based on participants’ self-reported past-week smoking 4 weeks after quitting and confirmed biologically via exhaled CO. <em>Note</em>: This represents a change from an original outcome of 6 months post-quit following preliminary analyses and discussions with mentoring committee.</p>
</section>
<section id="model-fitting" class="level3" data-number="1.2.2">
<h3 data-number="1.2.2" class="anchored" data-anchor-id="model-fitting"><span class="header-section-number">1.2.2</span> Model Fitting</h3>
<p>I will engineer features from raw predictors using procedures that represent categorical predictors numerically, address distributional shape, and impute missing data. I will use dimensionality reduction approaches (data- and domain-driven) to reduce the number of features in the models. I will consider glmnet, xgboost, and random forest classification statistical algorithms, which represent a wide range of characteristics.</p>
<p>I will use nested cross-validation, with 1 repeat of 10X CV on the inner loop and 3 repeats of 10X CV on the outer loop. Best models are selected using validation sets in the inner loop and evaluated using tests sets in the outer loop. Models will be selected and evaluated using area under the receiving operator characteristic curve (auROC).</p>
</section>
</section>
<section id="analysis-plan" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="analysis-plan"><span class="header-section-number">1.3</span> Analysis Plan</h2>
<section id="overview" class="level3" data-number="1.3.1">
<h3 data-number="1.3.1" class="anchored" data-anchor-id="overview"><span class="header-section-number">1.3.1</span> Overview</h3>
<p>I will develop and select the best model configuration to predict treatment success (<strong>AIM 1</strong>). I will then fit that best configuration to the full sample to produce a final model. I will use this final model as the starting point for <strong>AIM 2</strong>.</p>
<p>I will obtain a prediction for the likelihood of treatment success for each smoker had they received nicotine patch, C-NRT, and varenicline (3 predicted scores per participant). For each smoker, they will be “assigned” to the treatment that gives them the highest predicted chance of quitting. Thus, for each participant, I will have a) the treatment the model would have selected, and b) the predicted likelihood of quitting using that “best” treatment.</p>
<p>I will then evaluate clinical benefit in two ways:</p>
<ol type="1">
<li><p>I will use Bayesian estimation to compare the aggregate predicted treatment success (i.e., across participants) to observed treatment success in the original trial. This will allow me to quantify and compare statistically the difference in percent abstinence across the two treatment selection methods.</p></li>
<li><p>I will use Bayesian estimation to compare the observed trial abstinence of individuals who (randomly) received their best treatment with the observed trial abstinence of individuals who did not. This second approach offers the benefit of using only objective (observed) rather than predicted outcomes.</p></li>
</ol>
</section>
<section id="specific-steps" class="level3" data-number="1.3.2">
<h3 data-number="1.3.2" class="anchored" data-anchor-id="specific-steps"><span class="header-section-number">1.3.2</span> Specific Steps</h3>
<section id="aim-1" class="level4" data-number="1.3.2.1">
<h4 data-number="1.3.2.1" class="anchored" data-anchor-id="aim-1"><span class="header-section-number">1.3.2.1</span> AIM 1</h4>
<ol type="1">
<li><p>Data cleaning, cleaning EDA, modeling EDA (<em>Completed</em>)</p></li>
<li><p>Inner loop model fitting at CHTC (<em>Completed</em>)</p></li>
<li><p>Model selection &amp; evaluation (<em>In progress</em>)</p></li>
</ol>
<ul>
<li><p>Select best models for each outer fold based on validation set auROCs (1_metrics_inner) (<em>Completed</em>)</p></li>
<li><p>Evaluate best models based on test set auROCs &amp; calibrate probabilities using beta distribution (2_metrics_outer) (<em>In progress</em>)</p></li>
<li><p>In-depth evaluation of best models (3_eval_outer)</p></li>
<li><p><em>Fit single best model? Conduct SHAP on single best model?</em></p></li>
</ul>
<ol start="4" type="1">
<li>Bayesian analyses: posterior probability distributions around model performance to determine likelihood of prediction signal (distribution does not include 0.5)</li>
</ol>
</section>
<section id="aim-2" class="level4" data-number="1.3.2.2">
<h4 data-number="1.3.2.2" class="anchored" data-anchor-id="aim-2"><span class="header-section-number">1.3.2.2</span> AIM 2</h4>
<ol type="1">
<li><p>Determine which model(s) to use to generate predicted probabilities for each participant for each treatment (3 per person)</p></li>
<li><p>Obtain 3 predicted probabilities for each participant, substituting each of the three treatments</p></li>
<li><p>Identify “best” treatment for each participant</p></li>
<li><p>Quantify clinical benefit: Method 1</p></li>
</ol>
<ul>
<li><p>Extract best treatment probability for each participant</p></li>
<li><p>Bayesian comparison of predicted probabilities with observed abstinence</p></li>
</ul>
<ol start="5" type="1">
<li>Quantify clinical benefit: Method 2</li>
</ol>
<ul>
<li><p>Label each participant as assigned best treatment or not (i.e., best treatment per model matches randomly assigned treatment)</p></li>
<li><p>Bayesian comparison of abstinence rates for individuals assigned best treatment (vs.&nbsp;not) using only observed abstinence</p></li>
</ul>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Welcome</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>